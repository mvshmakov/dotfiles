# General usage tips:
# 1) To generate a log for some release, run:
# ```sh
# git shortlog commit_id...HEAD -n
# ```
# 2) While you can call these remotes anything you want, a common convention
# is to use origin as the remote for your forked repository (this will be
# created automatically when you run git clone) and upstream for the official repository.
# Source: https://www.atlassian.com/git/tutorials/comparing-workflows/forking-workflow

[user]
    name = Maxim Shmakov
    email = mvshmakov@mail.ru
    signingkey = 88C371E66837B278
[gpg]
    program = /opt/homebrew/bin/gpg
[github]
    user = mvshmakov
[sendemail]
    smtpEncryption = tls
    smtpServer = smtp.mail.ru
    smtpUser = mvshmakov@mail.ru
    smtpServerPort = 465
[credential]
    helper = osxkeychain
    # Prompt credentials if required
    interactive = always
[core]
    pager = delta
    # Useful when sharing a repository between Mac OS and Linux or Windows (only for MacOS)
    # https://git-scm.com/docs/git-config#Documentation/git-config.txt-coreprecomposeUnicode
    precomposeUnicode = true
    # To display non-english characters in a readable way
    quotePath = false
    # This setup should leave you with CRLF endings in Windows checkouts,
    # but LF endings on macOS and Linux systems and in the repository.
    autocrlf = input
    # Detect whitespace errors https://stackoverflow.com/a/592014/12349023
    whitespace = tab-in-indent,trailing-space,cr-at-eol
[alias]
    diff = diff --word-diff
    grep = grep -Ii
    log-oneline = log --oneline --decorate
    # Put only staged files in the stash
    stash-staged = !git stash --keep-index && \
				   git stash && \
				   git stash apply stash@{1} && \
				   git stash show -p | git apply -R && \
				   git stash drop stash@{1}
[commit]
    verbose = true
    gpgSign = true
    template = ~/.config/git/gitmessage
[tag]
    gpgSign = true
    sort = -version:refname
[init]
    # Init new repo with the main branch as default
    defaultBranch = main
[apply]
    # Strip whitespaces when applying patches based on core.whitespace
    # https://stackoverflow.com/a/592014/12349023
    whitespace = fix
[fetch]
    # Remove all local references to remote that are no longer available
    prune = true
    pruneTags = true
[branch]
    # Auto track the origin on checkout
    # and auto rebase stuff on pull
    # https://stackoverflow.com/a/22147540
    autoSetupMerge = always
    autoSetupRebase = always
    sort = -committerdate
[checkout]
    defaultRemote = origin
[diff]
    # Detect moved blocks of code and style them
    # differently from the usual removed/added lines
    colorMoved = default
[log]
    showSignature = true
[merge]
    log = true
    tool = vimdiff3
    conflictStyle = diff3
[push]
    # Not all git servers support this
    # https://people.kernel.org/monsieuricon/signed-git-pushes
    gpgSign = if-asked
    # Do not care about --set-upstream, just push
    # to the {defaultRemote}/{sameBranchName}
    default = current
[pull]
    rebase = true
    default = current
[rebase]
    # Enables !squash usage on rebase, for details see
    # https://thoughtbot.com/blog/autosquashing-git-commits
    autoSquash = true
    # Allow to rebase even on a dirty worktree
    # e.g., allow pull --rebase with local changes
    autoStash = true
[help]
    # Ask to autocorrect misspelled command
    autoCorrect = prompt
[interactive]
    # Git-delta related setup
    # https://github.com/dandavison/delta
    diffFilter = delta --color-only
[delta]
    navigate = true
    side-by-side = true
    line-numbers = true
[color]
    # Colorize git output https://stackoverflow.com/a/13075208/12349023
    ui = auto
# Auto-generated by `git lfs install`
[filter "lfs"]
    process = git-lfs filter-process
    required = true
    clean = git-lfs clean -- %f
    smudge = git-lfs smudge -- %f
